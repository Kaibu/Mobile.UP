<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Mobile.UP</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Mobile.UP</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>IPageOptions</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/lib/abstract-page.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#optionalNetwork">optionalNetwork</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#optionalSession">optionalSession</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#requireNetwork">requireNetwork</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#requireSession">requireSession</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="optionalNetwork"></a>
                                        <span class="name"><b>optionalNetwork</b><a href="#optionalNetwork"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>optionalNetwork:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="optionalSession"></a>
                                        <span class="name"><b>optionalSession</b><a href="#optionalSession"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>optionalSession:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="requireNetwork"></a>
                                        <span class="name"><b>requireNetwork</b><a href="#requireNetwork"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>requireNetwork:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="requireSession"></a>
                                        <span class="name"><b>requireSession</b><a href="#requireSession"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>requireSession:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { ISession } from &#x27;../services/login-provider/interfaces&#x27;;
import { ConnectionService } from &#x27;../services/connection/connection.service&#x27;;
import { UserSessionService } from &#x27;../services/user-session/user-session.service&#x27;;
import { Injector, Type } from &#x27;@angular/core&#x27;;
import { StaticInjectorService } from &#x27;./static-injector&#x27;;
import { ActivatedRoute, Router } from &#x27;@angular/router&#x27;;
import { MenuController, NavController, Platform } from &#x27;@ionic/angular&#x27;;
import {IConfig, IModule} from &#x27;./interfaces&#x27;;
import { ConfigService } from &#x27;../services/config/config.service&#x27;;
import { Logger, LoggingService } from &#x27;ionic-logging-service&#x27;;
import { WebIntentService } from &#x27;../services/web-intent/web-intent.service&#x27;;
import { utils } from &#x27;./util&#x27;;
import isEmptyObject &#x3D; utils.isEmptyObject;

export interface IPageOptions {
    requireSession?: boolean;
    // if the page doesn&#x27;t work without network at all
    // f.e. library search
    requireNetwork?: boolean;
    optionalSession?: boolean;
    // if the page could work with cached content
    // make sure you show an hint if there is no cached content available
    optionalNetwork?: boolean;
}

/**
 * @name AbstractPage
 * @classdesc An abstract implementation of a Page already implementing basic
 * features most Pages might use. To fire those features only this classes
 * constructor must be called with the desired options.
 *
 * https://robferguson.org/blog/2018/09/28/ionic-3-component-inheritance/
 */
export abstract class AbstractPage  {

    logger: Logger;
    session: ISession;

    pageReady: Promise&lt;void&gt;;
    pageReadyResolve: () &#x3D;&gt; void;
    pageReadyReject: (error) &#x3D;&gt; void;

    protected sessionProvider: UserSessionService;
    protected connection: ConnectionService;
    protected activatedRoute: ActivatedRoute;
    protected menu: MenuController;
    protected navCtrl: NavController;
    protected config: IConfig;
    protected loggingService: LoggingService;
    protected router: Router;
    protected webIntent: WebIntentService;
    public platform: Platform;

    protected constructor(
        pageOptions?: IPageOptions
    ) {

      const injector: Injector &#x3D; StaticInjectorService.getInjector();

      this.loggingService &#x3D; injector.get&lt;LoggingService&gt;(LoggingService as Type&lt;LoggingService&gt;);
      this.router &#x3D; injector.get&lt;Router&gt;(Router as Type&lt;Router&gt;);
      this.connection &#x3D; injector.get&lt;ConnectionService&gt;(ConnectionService as Type&lt;ConnectionService&gt;);
      this.sessionProvider &#x3D; injector.get&lt;UserSessionService&gt;(UserSessionService as Type&lt;UserSessionService&gt;);
      this.activatedRoute &#x3D; injector.get&lt;ActivatedRoute&gt;(ActivatedRoute as Type&lt;ActivatedRoute&gt;);
      this.menu &#x3D; injector.get&lt;MenuController&gt;(MenuController as Type&lt;MenuController&gt;);
      this.navCtrl &#x3D; injector.get&lt;NavController&gt;(NavController as Type&lt;NavController&gt;);
      this.webIntent &#x3D; injector.get&lt;WebIntentService&gt;(WebIntentService as Type&lt;WebIntentService&gt;);
      this.platform &#x3D; injector.get&lt;Platform&gt;(Platform as Type&lt;Platform&gt;);

      this.logger &#x3D; this.loggingService.getLogger(&#x27;[&#x27; + this.router.url + &#x27;]&#x27;);

      this.config &#x3D; ConfigService.config;

      if (pageOptions) { this.processOptions(pageOptions); }

      // Assign pageReady promises. Those should be called from a page
      // implementing this one
      this.pageReady &#x3D; new Promise(
        (resolve, reject) &#x3D;&gt; {
          this.pageReadyResolve &#x3D; () &#x3D;&gt; {
            this.logger.info(&#x27;page is now ready&#x27;);
            resolve();
          };
          this.pageReadyReject &#x3D; (error) &#x3D;&gt; {
            this.logger.error(&#x60;page is not ready: ${error}&#x60;);
            reject();
          };
        }
      );

      // Forwarding queryParams to the pre-existing handleQueryParams function.
      // The existing one doesn&#x27;t do anything, though
      this.activatedRoute.queryParams.subscribe(
        params &#x3D;&gt; {
          const parsedParams &#x3D; {};
          for (const k in params) {
            if (params.hasOwnProperty(k)) {
              parsedParams[k] &#x3D; JSON.parse(params[k]);
            }
          }
          if (!isEmptyObject(parsedParams)) {
            this.setMenuStatus(parsedParams[&#x27;menu&#x27;]);
            this.pageReady.then(
              () &#x3D;&gt; this.handleQueryParams(parsedParams)
            );
          }
        }
      );
    }

    /**
     * process the given pageOptions and execute desired functions
     * @param pageOptions
     */
    private processOptions(pageOptions: IPageOptions) {
      if (pageOptions.requireSession) { this.requireSession(false); }
      if (pageOptions.requireNetwork) { this.requireNetwork(true); }
      if (pageOptions.optionalSession) { this.requireSession(true); }
      if (pageOptions.optionalNetwork) { this.requireNetwork(false); }
    }

    /**
     * enables or disables the pages menu section
     * @param shouldEnable
     */
    private setMenuStatus(shouldEnable: boolean &#x3D; true) {
      this.menu.enable(shouldEnable);
    }

    /**
     * handles the queryParams for a page. Should be overwritten.
     * @param params {any} the params that should be handled
     */
    handleQueryParams(params: any) {
      this.logger.info(&#x60;Did not handle queryParams: &#x27;${JSON.stringify(params)}&#x27;&#x60;);
    }

    /**
     * opens a page by using it&#x27;s module
     * @description opens selected page by pushing it on the stack
     * @param module {IModule} module to be used
     * @param params {any} params {any} params that should by passed on
     */
    openModule(moduleToOpen: IModule, params: any &#x3D; {}) {
      if (moduleToOpen.url) {
        this.webIntent.handleWebIntentForModule(moduleToOpen);
      } else {
        this.navCtrl.navigateForward(
          &#x27;/&#x27; + moduleToOpen.componentName,
          {state: params}
        );
      }
    }

    /**
     * opens a page by name
     * @param moduleName {string} name of the module
     * @param params {any} params that should by passed on
     */
    openModuleByName(moduleName: string, params: any &#x3D; {}) {
      const moduleToOpen &#x3D; this.config.modules[moduleName];
      if (moduleToOpen) {
        this.openModule(moduleToOpen, params);
      } else {
        this.logger.error(&#x60;Cannot open unknown module &#x27;${moduleName}&#x27;&#x60;);
      }
    }

    /**
     * @name requireNetwork
     * @desc tests for network connection and sends the user back to the HomePage
     * if there is none;
     */
    requireNetwork(necessary?) {
        this.logger.debug(&#x27;requireNetwork&#x27;);
        this.connection.checkOnline(true, necessary);
    }

    /**
     * @name requireSession
     * @desc tests for existing session and sends user to LoginPage in case none is found
     */
    async requireSession(optional?) {
        this.logger.debug(&#x27;requireSession&#x27;);

        this.session &#x3D; await this.sessionProvider.getSession();
        if (!this.session &amp;&amp; !optional) { this.navCtrl.navigateForward(&#x27;/login&#x27;); }
    }
}
</code></pre>
    </div>
</div>


                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'IPageOptions.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
